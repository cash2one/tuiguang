<?php//=======================================//// Function 获取百度推广顶部链接// Author   Guo Jingzhou// Time     2012.08.04// Input    str----需要查询的关键词// Output   array--包含推广链接的一维数组////=======================================function get_baidu_top($keyword){	$urls_arr[0]  ='';                                         	//存放推广链接的数组	$keyword   =urlencode($keyword);							//对关键词进行编码	$url       ="http://www.baidu.com/s?wd=".$keyword;			//组成百度搜索链接	$html      =file_get_contents($url);						//读取搜索结果html	$pattern   ="/<font.*color=\"#008000\".*<\/font>/"; //匹配顶部推广链接的正则表达式		//获取顶部推广部分的html	$pos1=strpos($html,'class="r ec_bdtg"');						$pos2=strpos($html,'class="result"');	$content=substr($html,$pos1,$pos2-$pos1);					//这是顶部推广部分的html			preg_match_all($pattern,$content,$matches);					//匹配url	for($i=1;$i<count($matches[0]);$i++)	{			$urls_arr[]=strtolower(strip_tags($matches[0][$i]));			    //过滤标签、大小写转换	}	unset($urls_arr[0]);										//销毁第一个元素（为空）	return $urls_arr;											//返回存放url的一维数组}//=======================================//// Function 匹配百度右方的推广链接// Author   Guo Jingzhou// Time     2012.08.04// Input    str----需要搜索的关键词// Output   array--推广链接的一维数组//    //=======================================function get_baidu_right($keyword){	$urls_arr[0]='';                                         		 //存放推广链接的数组	$keyword    =urlencode($keyword);								 //对关键词进行编码	$url        ="http://www.baidu.com/s?wd=".$keyword;				 //组成百度搜索链接	$html       =file_get_contents($url);							 //读取搜索结果html	$pattern    ="/<font size=\"-1\" color=\"#008000\">.*<\/font>/"; //匹配顶部推广链接的正则表达式		//获取右方推广部分的html	$pos1       =strpos($html,'id="ec_im_container"');	$pos2       =strpos($html,'class="r ec_bdtg"');	$content    =substr($html,$pos1,$pos2-$pos1);		preg_match_all($pattern,$content,$matches);						 //匹配推广链接	foreach($matches[0] as $value)	{		$urls_arr[]=strtolower(strip_tags($value)); 				 //过滤标签、大小写转换	}		unset($urls_arr[0]);	return $urls_arr;											 //返回推广链接的一维数组}?>